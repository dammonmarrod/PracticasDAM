<!DOCTYPE html>
<html>
<head>
	<title></title>
	<style type="text/css">
		table,tr,td, caption{
			border: 2px solid black;
			text-align: center;
		}



	</style>
	<script type="text/javascript">

		window.onload = function()
		{
			descargaArchivo();	
		}

		function descargaArchivo()
		{
			// Obtener la instancia del objeto XMLHttpRequest
			if(window.XMLHttpRequest)
			{
				peticion_http = new XMLHttpRequest();
			}
			else if(window.ActiveXObject)
			{
				peticion_http = new ActiveXObject("Microsoft.XMLHTTP");
			}
			// Preparar la funcion de respuesta
			peticion_http.onreadystatechange = muestraContenido;
			// Realizar peticion HTTP
			peticion_http.open('GET', 'XMLSuper.xml', true);
			peticion_http.send(null);

			function muestraContenido()
			{
				if(peticion_http.readyState == 4)
				{
					if(peticion_http.status == 200)
					{
						var documentoXML = peticion_http.responseXML;
						var root = documentoXML.getElementsByTagName("supermercados")[0];

						var supermercados = root.getElementsByTagName("supermercado");
						
						
						crearTabla(supermercados);
						
					}

				}

				function crearTabla(misSupermercados)
				{
					for (var i = 0; i < misSupermercados.length; i++) 
					{
						var nombre = misSupermercados[i].getElementsByTagName("nombre")[0];
						var direccion = misSupermercados[i].getElementsByTagName("direccion")[0];
						var geoposicion = misSupermercados[i].getElementsByTagName("geoposicion")[0];

						tabla = document.createElement("table");
						body = document.getElementsByTagName("body");
						body[0].appendChild(tabla);
						tabla.style.margin =  "auto";

						titulo = document.createElement("caption");
						contenido = document.createTextNode("Supermercado");
						titulo.appendChild(contenido);

						tabla.appendChild(titulo);

						tr = document.createElement("tr");
						tabla.appendChild(tr);

						td = document.createElement("td");
						contenido= document.createTextNode("Nombre");
						td.appendChild(contenido);
						tr.appendChild(td);

						td = document.createElement("td");
						contenido= document.createTextNode(nombre.textContent);
						td.appendChild(contenido);
						tr.appendChild(td);

						tr = document.createElement("tr");
						tabla.appendChild(tr);

						td = document.createElement("td");
						contenido= document.createTextNode("Direccion");
						td.appendChild(contenido);
						tr.appendChild(td);

						td = document.createElement("td");
						contenido= document.createTextNode(direccion.textContent);
						td.appendChild(contenido);
						tr.appendChild(td);

						tr = document.createElement("tr");
						tabla.appendChild(tr);

						td = document.createElement("td");
						contenido= document.createTextNode("Geoposicion");
						td.appendChild(contenido);
						tr.appendChild(td);

						td = document.createElement("td");
						contenido= document.createTextNode(geoposicion.textContent);
						td.appendChild(contenido);
						tr.appendChild(td);

						ofertas = misSupermercados[i].getElementsByTagName("ofertas");
						oferta = ofertas.getElementsByTagName("oferta");
						alert(oferta.length);

						for (var j = 0; j < ofertas.length; j++)
						{
							tr = document.createElement("tr");
							tabla.appendChild(tr);

							td = document.createElement("td");
							contenido= document.createTextNode("Oferta " + (j + 1));
							td.appendChild(contenido);
							tr.appendChild(td);

							td = document.createElement("td");
							contenido= document.createTextNode("Nombre: " + ofertas[j].producto + ", Oferta: " + ofertas[j].oferta + ", Vigencia: " + ofertas[j].vigencia + ", Nota: " + ofertas[j].nota);
							td.appendChild(contenido);
							tr.appendChild(td);
						}

						productos = misSupermercados[i].getElementsByTagName("producto");

						for (var j = 0; j < productos.length; j++)
						{
							tr = document.createElement("tr");
							tabla.appendChild(tr);

							td = document.createElement("td");
							contenido= document.createTextNode("Producto " + (j + 1));
							td.appendChild(contenido);
							tr.appendChild(td);

							if(productos[j].adquirido == true)
							{
								productos[j].adquirido = "SI";
							}
							else
							{
								productos[j].adquirido = "NO";
							}

							td = document.createElement("td");
							contenido= document.createTextNode("Nombre: " + productos[j].nombre + ", Precio: " + productos[j].precio + ", Unidades: " + productos[j].unidades + ", Adquirido: " + productos[j].adquirido);
							td.appendChild(contenido);
							tr.appendChild(td);
						}

						br = document.createElement("br");
						body[0].appendChild(br);
					}

				}
			}
		}
	</script>
</head>
<body>

</body>
</html>